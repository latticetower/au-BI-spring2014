2014-03-04
- чтобы посмотреть, открывать файл output/hometask.html, в нем сразу должны отображаться все картинки с подписями.
- если при обновлении данных\перезапуске скриптов картинки не обновились, надо очистить кеш браузера
- картинки и файлы с результатами лежат в папке output/res, кроме нее и output/hometask.html для того, чтобы все корректно открывалось, ничего не нужно.

Описание исходного кода, процесса сборки 
1. Основные исходники скриптов лежат в текущей папке
* ht_data_generator.rb - генерирует данные для графиков по подзадачам 1,2,5, записывает их в заданный файл 
  (минимально принимает 3 параметра - путь к файлу с референсным геномом, sam файл, файл, куда выводить результат. четвертый параметр - отладочный, если не 0, то оно равно числу строк sam-файла, которое обрабатывается).
* ht_data_generator_part3.rb - генерирует данные для графиков по подзадачам 3,4, записывает их в заданный файл.
  (минимально принимает 3 параметра - путь к файлу с референсным геномом, sam файл, файл, куда выводить результат. 
  четвертый параметр - отладочный, если не 0, то оно равно числу строк sam-файла, которое обрабатывается (если 0 - то будут обработаны все, если ничего не передавать, тоже),
  пятый параметр - опциональный - префикс для графиков - используется для того, чтобы генерировать тем же скриптом графики по выводу bowtie).
  
* ht_plots_generator.rb (запускала локально) 
    - берет все сгенерированные файлы с данными для графиков и создает по ним файлы с графиками.
    - подготавливает шаблон для asciidoc - файл hometask3.txt
    (основа - файл hometask3.txt.template, в который с помощью пакета mustache вставляется часть данных, которые были получены вместе с графиками)
    - полученный файл hometask3.txt обрабатывается asciidoc'ом, в результате на выходе получаем красивую html-страницу со ссылками на графики 
    (ссылки пока статические, то есть не меняются в ходе работы скриптов, меняются только дополнительные данные - процент покрытия и среднее покрытие из задания 1).
2. В папке helpers лежат вспомогательные классы:
  - для работы с sam-файлами - файл simple_sam_reader.rb
  - для работы с графиками (локальной) - файл plotter_utility.rb
  
локально используются пакеты: 
 * mustache (для вставки значений в файл с шаблоном - в предыдущих л.р. не использовался)
   hometask.txt.template - до обработки этим пакетом, hometask.txt - после обработки (mustache вызывается в скрипте ht_plots_generator.rb)
 * rbyvis - для построения графиков
 
Кроме этого, локально используется asciidoc: ему передается в качестве параметра hometask.txt, в результате на выходе файл с дз hometask.html

